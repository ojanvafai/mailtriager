- Sometime archived threads don't seem to go away from the thread list.
- Sometimes single-thread-view goes back to the threadlist when there's more threads. When this happens there are somehow two ThreadListViews fighting it seems like and every thread after does this until reload.
- Fix issues with the thread disappearing after having been saved in localstorage but then removed on update...race condition where it can't be found when trying to renderOne?
- Minimize the number of fetches when a thread is modified. Can use the modify response to update message details, but then don't get the new historyID. Maybe find some way to have a concept of a thread with no historyId? Try to infer the history ID from the messages (the largest one) and hope that's good enough?

- TODO: Make this file just be codebase cleanups and move all bugs/feature requests to https://github.com/ojanvafai/make-time/issues

- Autocomplete to field: Create AddressCompose that opens autocomplete for every non-comma input and autocompletes whatever is between the two commas and stops autocomplete when the cursor passes over a commn. Need to normalize whitespace outside of <>'s.
- Give progress indicator for threads left to load in make-time/triage views.

Tasks UI:
- need ui for changing task state even if there is rich text tags for setting all of it initially
- need the ability to add comments to tasks that doesn't archive them
- rename make time to tasks or Todo
- Add start and due dates
- Add quick add to the tasks view
- Add filtering over tasks to just show the last n days

P1: Will try to do soonish.
- Give more reply options: ability to forward, reply to a specific message, reply+!archive/reply+blocked/reply+priority?
- Use SendAs gmail API to avoid adding yourself to the to line of threads you're not already on to avoid them popping back into your inbox when you send. Also would allow for changing sender in compose view.
- make switching between compose/todo/triage easier. Make the UI more prominent and add keyboard shortcuts.
- Add embedded composeView in the maketime/triage views for quick compose that's not replying to the current thread.
- add better UI for adding new filters, e.g. when viewing an email. For needs filter, could have it route through the filter immediately so you can see it work.
- Add autocomplete of priorities in ComposeView after typing #.
- Add send+priority buttons to the compose view. Have it encode the priority in a comment? Or a display:none element?
- Add manual sorting of triaged threads.
- Make back forward work for viewone and threadlist. Keep track of the last thread in viewone for forward navs instead of trying to put the thread into the history. This will make the back button on android do the right thing when in viewone.
- Make header:foo the only syntax for rules with a bit of special casing for email rules to handle foo+bar@ syntax.
- add the ability to do inline responses
- Make really resilient to flaky networks (e.g. queue up modify requests if they fail). This also can make sending emails something that happens instantly. Show pending work in the top-left so people can see what's pending and give a way of getting at the list of pending work. Ping google.com or something to see if offline since navigator.online doesn't catch flaky networks.
- add ability to search for a set of threads and see which filter would match

P2: Will only do if something makes these seem worth doing.
- Add undo send?
- Wicked witch mode: Show in MakeTime the count of threads that are not being shown and an option to load them (for this session?)
- Wicked witch mode: count not shown by doing a search without the date and a search with the date and counting the diff.
- Make swipe work on mobile
- Add a debankrupt button that unbankrupts 10-30 bankrupt threads.
- Change the title when bankrupting threads so it doesn't seem like it's still fetching? Or maybe queue up the best effort queues and do them all after the non-best effort queues are done.
- triaged and maketime views need to give you an indication of there being new threads that need triaging.
- Grey out undo button when there's nothing to undo
- Add a mode to default to view one
- Add cc/bcc/body as closed by default sections
- Add drafts concept instead of one compose at a time. Right now two compose windows will mean one overrides the other in local storage.
- Linkify URLs in the plain text or html content
- Show a spinner when clicking the save button in the settings dialog since that blocks on a a network fetch before reloading the page.
- add ability to filter no subject emails
- Add autocomplete for label names in the queues and filters views.
- Removing a queue means the currently queued messages never get dequeued. Maybe show any queues that are no longer daily/weekly/monthly in the triage view.
- Have timer dialog have options to cancel timer and turnoff autostart.
- Add to home screen support
- Support renaming labels (updates the label name in all the filters and queues).
- Add "||" to rule query language.
- Add "-" or "!" for -foo@bar.com
- Allow regexps with special regexp syntax, e.g. r'regexphere'.
- Save back in the current format, but upgrade to the new format using the number of columns as the effective version number
- group filter rules with the same label like headers in asana. For a given grouping of rules, sort the rules alphabetically
- autocomplete the allowed filter fields in the rule editor
- add drag and drop reordering of filters
- Include "XXX wrote" prefixes in quote eliding
- elide quotes based off the "In-Reply-To" instead of whatever happens to be the previous message
- List more names in the Vueue to see more of the dialog happening in the thread. Bold the names for more recent message.
- Give a way to show the email headers so that people can easily write filters based off the headers.
- Have key handling code early return if a dialog is open.
- Put links for downloading attachments.
- Show attachment blobs for gsuite docs like gmail does.
- When updating messages, update the unread state even for old messages since that might have changed.
- disable title tags in emails. They currently update the title of make-time.
- Google Assistant integration
- Send replys from the recieving address for multiple email users. Using "From: ". Not quite sure how to figure out which email address to use. For mailing lists, could use Delivered-To, that might be good enough.
- if the last message is vacation responder, and the message before that one is read, and it's not in a triager/auto queue, then auto archive
